(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[346],{6996:function(e,s,t){Promise.resolve().then(t.bind(t,1569))},1569:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return i}});var a=t(3808),r=t(2970),l=t(997);function i(){let e=(0,l.useRouter)(),[s,t]=(0,r.useState)(null),[i,n]=(0,r.useState)(!0),[c,o]=(0,r.useState)(null);async function d(){try{let s=await fetch("".concat("https://peptalk-api.polished-glitter-23bb.workers.dev","/api/auth/me"),{credentials:"include"});if(401===s.status){e.push("/login");return}if(!s.ok)throw Error("Failed to fetch user");let a=await s.json();t(a.user)}catch(e){console.error("Error fetching user:",e),o(e instanceof Error?e.message:"Something went wrong")}finally{n(!1)}}async function u(){try{await fetch("".concat("https://peptalk-api.polished-glitter-23bb.workers.dev","/api/auth/logout"),{method:"POST",credentials:"include"}),e.push("/")}catch(e){console.error("Logout error:",e)}}if((0,r.useEffect)(()=>{d()},[]),i)return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("svg",{className:"animate-spin h-8 w-8 text-blue-600 mx-auto mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading your account..."})]})});if(c||!s)return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:(0,a.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Error"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:c||"Failed to load account"}),(0,a.jsx)("a",{href:"/login",className:"inline-block bg-blue-600 text-white py-2 px-6 rounded-lg font-semibold hover:bg-blue-700",children:"Sign in again"})]})});let x="active"===s.subscriptionStatus;return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-8 py-6 text-white",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Account Settings"}),(0,a.jsx)("p",{className:"text-blue-100",children:s.email})]}),(0,a.jsxs)("div",{className:"p-8 space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Subscription"}),(0,a.jsx)("div",{className:"border rounded-lg p-6",children:x?(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:"Active"})]}),(0,a.jsxs)("p",{className:"text-gray-600 text-sm mb-1",children:["Plan: ",(0,a.jsx)("strong",{className:"capitalize",children:s.subscriptionPlan})]}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"You have full access to all peptide research"})]}),(0,a.jsx)("a",{href:"/pricing",className:"text-sm text-blue-600 hover:text-blue-700 font-semibold",children:"Manage subscription"})]}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-gray-400 rounded-full"}),(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:"No active subscription"})]}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Subscribe to access full peptide research and PDF downloads"}),(0,a.jsx)("a",{href:"/pricing",className:"inline-block bg-blue-600 text-white py-2 px-6 rounded-lg font-semibold hover:bg-blue-700 transition",children:"View plans"})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Account Information"}),(0,a.jsxs)("div",{className:"border rounded-lg p-6 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-semibold text-gray-700",children:"Email"}),(0,a.jsx)("p",{className:"text-gray-900",children:s.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-semibold text-gray-700",children:"Member since"}),(0,a.jsx)("p",{className:"text-gray-900",children:new Date(s.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]}),(0,a.jsx)("div",{className:"pt-6 border-t",children:(0,a.jsx)("button",{onClick:u,className:"text-red-600 hover:text-red-700 font-semibold text-sm",children:"Sign out"})})]})]})})})}},997:function(e,s,t){"use strict";var a=t(2065);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[850,663,744],function(){return e(e.s=6996)}),_N_E=e.O()}]);