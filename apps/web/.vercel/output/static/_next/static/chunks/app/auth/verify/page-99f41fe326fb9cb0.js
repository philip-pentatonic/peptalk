(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[937],{668:function(e,s,t){Promise.resolve().then(t.bind(t,738))},738:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return l}});var r=t(3808),n=t(2970),i=t(997);function a(){let e=(0,i.useSearchParams)(),s=(0,i.useRouter)(),[t,a]=(0,n.useState)("verifying"),[l,c]=(0,n.useState)(null),o=(0,n.useRef)(!1);async function u(e){try{let t=await fetch("".concat("https://peptalk-api.polished-glitter-23bb.workers.dev","/api/auth/verify?token=").concat(e),{method:"GET",credentials:"include"}),r=await t.json();if(!t.ok)throw Error(r.error||"Verification failed");a("success"),setTimeout(()=>{s.push("/account")},2e3)}catch(e){console.error("Verification error:",e),a("error"),c(e instanceof Error?e.message:"Verification failed")}}return((0,n.useEffect)(()=>{if(o.current)return;o.current=!0;let s=e.get("token");if(!s){a("error"),c("No verification token provided");return}u(s)},[e]),"verifying"===t)?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:(0,r.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsxs)("svg",{className:"animate-spin h-8 w-8 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Verifying your email..."}),(0,r.jsx)("p",{className:"text-gray-600",children:"Please wait while we verify your magic link"})]})}):"success"===t?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:(0,r.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Successfully signed in!"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Redirecting you to your account..."}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500",children:[(0,r.jsxs)("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:(0,r.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Verification failed"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:l||"The magic link is invalid or has expired."}),(0,r.jsx)("a",{href:"/login",className:"inline-block bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 transition",children:"Request a new link"})]})})}function l(){return(0,r.jsx)(n.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:(0,r.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsxs)("svg",{className:"animate-spin h-8 w-8 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Loading..."}),(0,r.jsx)("p",{className:"text-gray-600",children:"Please wait"})]})}),children:(0,r.jsx)(a,{})})}},997:function(e,s,t){"use strict";var r=t(2065);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[850,663,744],function(){return e(e.s=668)}),_N_E=e.O()}]);